{"version":3,"names":["isWindowDefined","window","isFirefox","navigator","userAgent","toLowerCase","includes","useDarkMode","darkMode","setDarkMode","React","useState","matchMedia","matches","useEffect","mediaQuery","changeDarkMode","addListener","removeListener","AutoThemeProvider","theme","propsTheme","colorScheme","propsColorScheme","autoStyle","children","html","isDark","style","backgroundColor","all","color","textColor","minHeight","width","undefined"],"sources":["AutoThemeProvider.tsx"],"sourcesContent":["import React from \"react\";\nimport { all } from \"./themes\";\nimport { ThemeableElement, ThemeContext } from \"./utils\";\n\nconst isWindowDefined = typeof window !== \"undefined\";\n\n/** Determine if the current browser is FireFox */\nexport const isFirefox = () => {\n  if (isWindowDefined && window?.navigator?.userAgent) {\n    if (window.navigator.userAgent.toLowerCase().includes(\"firefox\")) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport interface AutoThemeProviderProps extends ThemeableElement<\"div\"> {\n  /** Whether to automatically change the font and background color */\n  autoStyle?: boolean;\n  /** Any React node children */\n  children: React.ReactNode;\n}\n\n/**\n * Determine if the user has a \"prefers-color-scheme\" mode enabled in their browser.\n * This is helpful for detecting if a user prefers dark mode.\n */\nconst useDarkMode = () => {\n  const [darkMode, setDarkMode] = React.useState(\n    isWindowDefined && window\n      ? window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      : false\n  );\n\n  React.useEffect(() => {\n    if (!isWindowDefined) {\n      return;\n    }\n\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n    /** Run when the user changes this setting. */\n    const changeDarkMode = () => setDarkMode(!darkMode);\n\n    mediaQuery.addListener(changeDarkMode);\n\n    return () => {\n      mediaQuery.removeListener(changeDarkMode);\n    };\n  }, [darkMode]);\n\n  return darkMode;\n};\n\n/**\n * A theme provider that automatically detects a users browser and colorScheme.\n * Themes are set for each component using React Context.\n * It also sets the background color and text color to the correct color.\n */\nexport const AutoThemeProvider = ({\n  theme: propsTheme,\n  colorScheme: propsColorScheme,\n  autoStyle,\n  children,\n  ...html\n}: AutoThemeProviderProps) => {\n  const isDark = useDarkMode();\n  const colorScheme = propsColorScheme || (isDark ? \"dark\" : \"light\");\n  const theme = propsTheme || (isFirefox() ? \"firefox\" : \"chrome\");\n  const style = {\n    backgroundColor: all[theme][colorScheme].backgroundColor,\n    color: all[theme][colorScheme].textColor,\n    minHeight: \"100%\",\n    width: \"100%\",\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, colorScheme }}>\n      <div style={autoStyle ? style : undefined} {...html}>\n        {children}\n      </div>\n    </ThemeContext.Provider>\n  );\n};\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AAAyD;AAEzD,MAAMA,eAAe,GAAG,OAAOC,MAAM,KAAK,WAAW;;AAErD;AACO,MAAMC,SAAS,GAAG,MAAM;EAAA;EAC7B,IAAIF,eAAe,eAAIC,MAAM,yDAAN,QAAQE,SAAS,8CAAjB,kBAAmBC,SAAS,EAAE;IACnD,IAAIH,MAAM,CAACE,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;MAChE,OAAO,IAAI;IACb;EACF;EAEA,OAAO,KAAK;AACd,CAAC;AAAC;AASF;AACA;AACA;AACA;AACA,MAAMC,WAAW,GAAG,MAAM;EACxB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGC,cAAK,CAACC,QAAQ,CAC5CX,eAAe,IAAIC,MAAM,GACrBA,MAAM,CAACW,UAAU,CAAC,8BAA8B,CAAC,CAACC,OAAO,GACzD,KAAK,CACV;EAEDH,cAAK,CAACI,SAAS,CAAC,MAAM;IACpB,IAAI,CAACd,eAAe,EAAE;MACpB;IACF;IAEA,MAAMe,UAAU,GAAGd,MAAM,CAACW,UAAU,CAAC,8BAA8B,CAAC;;IAEpE;IACA,MAAMI,cAAc,GAAG,MAAMP,WAAW,CAAC,CAACD,QAAQ,CAAC;IAEnDO,UAAU,CAACE,WAAW,CAACD,cAAc,CAAC;IAEtC,OAAO,MAAM;MACXD,UAAU,CAACG,cAAc,CAACF,cAAc,CAAC;IAC3C,CAAC;EACH,CAAC,EAAE,CAACR,QAAQ,CAAC,CAAC;EAEd,OAAOA,QAAQ;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACO,MAAMW,iBAAiB,GAAG,QAMH;EAAA,IANI;MAChCC,KAAK,EAAEC,UAAU;MACjBC,WAAW,EAAEC,gBAAgB;MAC7BC,SAAS;MACTC;IAEsB,CAAC;IADpBC,IAAI;EAEP,MAAMC,MAAM,GAAGpB,WAAW,EAAE;EAC5B,MAAMe,WAAW,GAAGC,gBAAgB,KAAKI,MAAM,GAAG,MAAM,GAAG,OAAO,CAAC;EACnE,MAAMP,KAAK,GAAGC,UAAU,KAAKnB,SAAS,EAAE,GAAG,SAAS,GAAG,QAAQ,CAAC;EAChE,MAAM0B,KAAK,GAAG;IACZC,eAAe,EAAEC,WAAG,CAACV,KAAK,CAAC,CAACE,WAAW,CAAC,CAACO,eAAe;IACxDE,KAAK,EAAED,WAAG,CAACV,KAAK,CAAC,CAACE,WAAW,CAAC,CAACU,SAAS;IACxCC,SAAS,EAAE,MAAM;IACjBC,KAAK,EAAE;EACT,CAAC;EAED,oBACE,6BAAC,mBAAY,CAAC,QAAQ;IAAC,KAAK,EAAE;MAAEd,KAAK;MAAEE;IAAY;EAAE,gBACnD;IAAK,KAAK,EAAEE,SAAS,GAAGI,KAAK,GAAGO;EAAU,GAAKT,IAAI,GAChDD,QAAQ,CACL,CACgB;AAE5B,CAAC;AAAC"}
