{"version":3,"names":["buildValue","key","value","valueClass","showKey","depth","computedKey","includes","isRoot","styles","text","ObjectValue","props","ast","theme","colorScheme","className","html","themeClass","useTheme","asyncValue","setAsyncValue","useState","useEffect","Promise","waitForPromiseResult","promise","getPromiseState","String","number","boolean","string","undefined","toString","name","null","Array","isArray","length","Date","RegExp","regex","Error","error","isObject","constructor","makeClass","defaultProps"],"sources":["ObjectValue.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport makeClass from \"clsx\";\nimport { ThemeableElement, useTheme } from \"@devtools-ds/themes\";\nimport { ASTNode, isObject, getPromiseState } from \"@devtools-ds/object-parser\";\nimport styles from \"./ObjectInspector.css\";\n\ninterface ObjectValueProps extends ThemeableElement<\"span\"> {\n  /** Type of object. */\n  ast: ASTNode;\n  /** Whether or not to show the key */\n  showKey: boolean;\n}\n\n/**\n * Build the key and value spans\n *\n * @param key - The key string\n * @param value - The value string\n * @param valueClass - The class to apply to the value\n * @param showKey - Whether or not to show the key with the value\n * @param depth - Current depth (so we don't put a key on root)\n */\nconst buildValue = (\n  key: string,\n  value: React.ReactNode,\n  valueClass: string,\n  showKey: boolean,\n  depth: number\n) => {\n  const computedKey = key.includes(\"-\") ? `\"${key}\"` : key;\n  const isRoot = depth <= 0;\n  return (\n    <span className={styles.text}>\n      {!isRoot && showKey && (\n        <>\n          <span className={styles.key}>{computedKey}</span>\n          <span>:&nbsp;</span>\n        </>\n      )}\n\n      <span className={valueClass}>{value}</span>\n    </span>\n  );\n};\n\n/** Display a leaf key-value pair with appropriate styles. */\nexport const ObjectValue = (props: ObjectValueProps) => {\n  const { ast, theme, showKey, colorScheme, className, ...html } = props;\n  const { themeClass } = useTheme({ theme, colorScheme }, styles);\n  const [asyncValue, setAsyncValue] = useState(<span />);\n  let value = <span />;\n\n  /** Handle async types once */\n  useEffect(() => {\n    if (ast.value instanceof Promise) {\n      /** Async function to wait for Promise.race */\n      const waitForPromiseResult = async (promise: Promise<any>) => {\n        setAsyncValue(\n          buildValue(\n            ast.key,\n            `Promise { \"${await getPromiseState(promise)}\" }`,\n            styles.key,\n            showKey,\n            ast.depth\n          )\n        );\n      };\n\n      waitForPromiseResult(ast.value);\n    }\n  }, [ast, showKey]);\n\n  if (typeof ast.value === \"number\" || typeof ast.value === \"bigint\") {\n    // Number\n    value = buildValue(\n      ast.key,\n      String(ast.value),\n      styles.number,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"boolean\") {\n    // Boolean\n    value = buildValue(\n      ast.key,\n      String(ast.value),\n      styles.boolean,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"string\") {\n    // String\n    value = buildValue(\n      ast.key,\n      `\"${ast.value}\"`,\n      styles.string,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"undefined\") {\n    // Undefined\n    value = buildValue(\n      ast.key,\n      \"undefined\",\n      styles.undefined,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"symbol\") {\n    // Symbol\n    value = buildValue(\n      ast.key,\n      ast.value.toString(),\n      styles.string,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"function\") {\n    // Function\n    value = buildValue(\n      ast.key,\n      `${ast.value.name}()`,\n      styles.key,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"object\") {\n    if (ast.value === null) {\n      // Null\n      value = buildValue(ast.key, \"null\", styles.null, showKey, ast.depth);\n    } else if (Array.isArray(ast.value)) {\n      // Array\n      value = buildValue(\n        ast.key,\n        `Array(${ast.value.length})`,\n        styles.key,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof Date) {\n      // Date\n      value = buildValue(\n        ast.key,\n        `Date ${ast.value.toString()}`,\n        styles.value,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof RegExp) {\n      // RegExp\n      value = buildValue(\n        ast.key,\n        ast.value.toString(),\n        styles.regex,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof Error) {\n      // Error\n      value = buildValue(\n        ast.key,\n        ast.value.toString(),\n        styles.error,\n        showKey,\n        ast.depth\n      );\n    } else if (isObject(ast.value)) {\n      // Object\n      value = buildValue(ast.key, \"{â€¦}\", styles.key, showKey, ast.depth);\n    } else {\n      // WeakMap, WeakSet, Custom Classes, etc\n      value = buildValue(\n        ast.key,\n        ast.value.constructor.name,\n        styles.key,\n        showKey,\n        ast.depth\n      );\n    }\n  }\n\n  return (\n    <span className={makeClass(themeClass, className)} {...html}>\n      {asyncValue}\n      {value}\n    </span>\n  );\n};\n\nObjectValue.defaultProps = {\n  showKey: true,\n};\n\nexport default ObjectValue;\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAA2C;AAAA;AAAA;AAS3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,UAAU,GAAG,CACjBC,GAAW,EACXC,KAAsB,EACtBC,UAAkB,EAClBC,OAAgB,EAChBC,KAAa,KACV;EACH,MAAMC,WAAW,GAAGL,GAAG,CAACM,QAAQ,CAAC,GAAG,CAAC,GAAI,IAAGN,GAAI,GAAE,GAAGA,GAAG;EACxD,MAAMO,MAAM,GAAGH,KAAK,IAAI,CAAC;EACzB,oBACE;IAAM,SAAS,EAAEI,wBAAM,CAACC;EAAK,GAC1B,CAACF,MAAM,IAAIJ,OAAO,iBACjB,yEACE;IAAM,SAAS,EAAEK,wBAAM,CAACR;EAAI,GAAEK,WAAW,CAAQ,eACjD,2CAAM,OAAO,CAAO,CAEvB,eAED;IAAM,SAAS,EAAEH;EAAW,GAAED,KAAK,CAAQ,CACtC;AAEX,CAAC;;AAED;AACO,MAAMS,WAAW,GAAIC,KAAuB,IAAK;EACtD,MAAM;MAAEC,GAAG;MAAEC,KAAK;MAAEV,OAAO;MAAEW,WAAW;MAAEC;IAAmB,CAAC,GAAGJ,KAAK;IAAdK,IAAI,0CAAKL,KAAK;EACtE,MAAM;IAAEM;EAAW,CAAC,GAAG,IAAAC,gBAAQ,EAAC;IAAEL,KAAK;IAAEC;EAAY,CAAC,EAAEN,wBAAM,CAAC;EAC/D,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAG,IAAAC,eAAQ,gBAAC,0CAAQ,CAAC;EACtD,IAAIpB,KAAK,gBAAG,0CAAQ;;EAEpB;EACA,IAAAqB,gBAAS,EAAC,MAAM;IACd,IAAIV,GAAG,CAACX,KAAK,YAAYsB,OAAO,EAAE;MAChC;MACA,MAAMC,oBAAoB,GAAG,MAAOC,OAAqB,IAAK;QAC5DL,aAAa,CACXrB,UAAU,CACRa,GAAG,CAACZ,GAAG,EACN,cAAa,MAAM,IAAA0B,6BAAe,EAACD,OAAO,CAAE,KAAI,EACjDjB,wBAAM,CAACR,GAAG,EACVG,OAAO,EACPS,GAAG,CAACR,KAAK,CACV,CACF;MACH,CAAC;MAEDoB,oBAAoB,CAACZ,GAAG,CAACX,KAAK,CAAC;IACjC;EACF,CAAC,EAAE,CAACW,GAAG,EAAET,OAAO,CAAC,CAAC;EAElB,IAAI,OAAOS,GAAG,CAACX,KAAK,KAAK,QAAQ,IAAI,OAAOW,GAAG,CAACX,KAAK,KAAK,QAAQ,EAAE;IAClE;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACP2B,MAAM,CAACf,GAAG,CAACX,KAAK,CAAC,EACjBO,wBAAM,CAACoB,MAAM,EACbzB,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,SAAS,EAAE;IACzC;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACP2B,MAAM,CAACf,GAAG,CAACX,KAAK,CAAC,EACjBO,wBAAM,CAACqB,OAAO,EACd1B,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,QAAQ,EAAE;IACxC;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACN,IAAGY,GAAG,CAACX,KAAM,GAAE,EAChBO,wBAAM,CAACsB,MAAM,EACb3B,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,WAAW,EAAE;IAC3C;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACP,WAAW,EACXQ,wBAAM,CAACuB,SAAS,EAChB5B,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,QAAQ,EAAE;IACxC;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACPY,GAAG,CAACX,KAAK,CAAC+B,QAAQ,EAAE,EACpBxB,wBAAM,CAACsB,MAAM,EACb3B,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,UAAU,EAAE;IAC1C;IACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACN,GAAEY,GAAG,CAACX,KAAK,CAACgC,IAAK,IAAG,EACrBzB,wBAAM,CAACR,GAAG,EACVG,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;EACH,CAAC,MAAM,IAAI,OAAOQ,GAAG,CAACX,KAAK,KAAK,QAAQ,EAAE;IACxC,IAAIW,GAAG,CAACX,KAAK,KAAK,IAAI,EAAE;MACtB;MACAA,KAAK,GAAGF,UAAU,CAACa,GAAG,CAACZ,GAAG,EAAE,MAAM,EAAEQ,wBAAM,CAAC0B,IAAI,EAAE/B,OAAO,EAAES,GAAG,CAACR,KAAK,CAAC;IACtE,CAAC,MAAM,IAAI+B,KAAK,CAACC,OAAO,CAACxB,GAAG,CAACX,KAAK,CAAC,EAAE;MACnC;MACAA,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACN,SAAQY,GAAG,CAACX,KAAK,CAACoC,MAAO,GAAE,EAC5B7B,wBAAM,CAACR,GAAG,EACVG,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;IACH,CAAC,MAAM,IAAIQ,GAAG,CAACX,KAAK,YAAYqC,IAAI,EAAE;MACpC;MACArC,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACN,QAAOY,GAAG,CAACX,KAAK,CAAC+B,QAAQ,EAAG,EAAC,EAC9BxB,wBAAM,CAACP,KAAK,EACZE,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;IACH,CAAC,MAAM,IAAIQ,GAAG,CAACX,KAAK,YAAYsC,MAAM,EAAE;MACtC;MACAtC,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACPY,GAAG,CAACX,KAAK,CAAC+B,QAAQ,EAAE,EACpBxB,wBAAM,CAACgC,KAAK,EACZrC,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;IACH,CAAC,MAAM,IAAIQ,GAAG,CAACX,KAAK,YAAYwC,KAAK,EAAE;MACrC;MACAxC,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACPY,GAAG,CAACX,KAAK,CAAC+B,QAAQ,EAAE,EACpBxB,wBAAM,CAACkC,KAAK,EACZvC,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;IACH,CAAC,MAAM,IAAI,IAAAuC,sBAAQ,EAAC/B,GAAG,CAACX,KAAK,CAAC,EAAE;MAC9B;MACAA,KAAK,GAAGF,UAAU,CAACa,GAAG,CAACZ,GAAG,EAAE,KAAK,EAAEQ,wBAAM,CAACR,GAAG,EAAEG,OAAO,EAAES,GAAG,CAACR,KAAK,CAAC;IACpE,CAAC,MAAM;MACL;MACAH,KAAK,GAAGF,UAAU,CAChBa,GAAG,CAACZ,GAAG,EACPY,GAAG,CAACX,KAAK,CAAC2C,WAAW,CAACX,IAAI,EAC1BzB,wBAAM,CAACR,GAAG,EACVG,OAAO,EACPS,GAAG,CAACR,KAAK,CACV;IACH;EACF;EAEA,oBACE;IAAM,SAAS,EAAE,IAAAyC,aAAS,EAAC5B,UAAU,EAAEF,SAAS;EAAE,GAAKC,IAAI,GACxDG,UAAU,EACVlB,KAAK,CACD;AAEX,CAAC;AAAC;AAEFS,WAAW,CAACoC,YAAY,GAAG;EACzB3C,OAAO,EAAE;AACX,CAAC;AAAC,eAEaO,WAAW;AAAA"}
