{"version":3,"names":["React","useState","useEffect","makeClass","useTheme","isObject","getPromiseState","styles","buildValue","key","value","valueClass","showKey","depth","computedKey","includes","isRoot","text","ObjectValue","props","ast","theme","colorScheme","className","html","themeClass","asyncValue","setAsyncValue","Promise","waitForPromiseResult","promise","String","number","boolean","string","undefined","toString","name","null","Array","isArray","length","Date","RegExp","regex","Error","error","constructor","defaultProps"],"sources":["ObjectValue.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport makeClass from \"clsx\";\nimport { ThemeableElement, useTheme } from \"@devtools-ds/themes\";\nimport { ASTNode, isObject, getPromiseState } from \"@devtools-ds/object-parser\";\nimport styles from \"./ObjectInspector.css\";\n\ninterface ObjectValueProps extends ThemeableElement<\"span\"> {\n  /** Type of object. */\n  ast: ASTNode;\n  /** Whether or not to show the key */\n  showKey: boolean;\n}\n\n/**\n * Build the key and value spans\n *\n * @param key - The key string\n * @param value - The value string\n * @param valueClass - The class to apply to the value\n * @param showKey - Whether or not to show the key with the value\n * @param depth - Current depth (so we don't put a key on root)\n */\nconst buildValue = (\n  key: string,\n  value: React.ReactNode,\n  valueClass: string,\n  showKey: boolean,\n  depth: number\n) => {\n  const computedKey = key.includes(\"-\") ? `\"${key}\"` : key;\n  const isRoot = depth <= 0;\n  return (\n    <span className={styles.text}>\n      {!isRoot && showKey && (\n        <>\n          <span className={styles.key}>{computedKey}</span>\n          <span>:&nbsp;</span>\n        </>\n      )}\n\n      <span className={valueClass}>{value}</span>\n    </span>\n  );\n};\n\n/** Display a leaf key-value pair with appropriate styles. */\nexport const ObjectValue = (props: ObjectValueProps) => {\n  const { ast, theme, showKey, colorScheme, className, ...html } = props;\n  const { themeClass } = useTheme({ theme, colorScheme }, styles);\n  const [asyncValue, setAsyncValue] = useState(<span />);\n  let value = <span />;\n\n  /** Handle async types once */\n  useEffect(() => {\n    if (ast.value instanceof Promise) {\n      /** Async function to wait for Promise.race */\n      const waitForPromiseResult = async (promise: Promise<any>) => {\n        setAsyncValue(\n          buildValue(\n            ast.key,\n            `Promise { \"${await getPromiseState(promise)}\" }`,\n            styles.key,\n            showKey,\n            ast.depth\n          )\n        );\n      };\n\n      waitForPromiseResult(ast.value);\n    }\n  }, [ast, showKey]);\n\n  if (typeof ast.value === \"number\" || typeof ast.value === \"bigint\") {\n    // Number\n    value = buildValue(\n      ast.key,\n      String(ast.value),\n      styles.number,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"boolean\") {\n    // Boolean\n    value = buildValue(\n      ast.key,\n      String(ast.value),\n      styles.boolean,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"string\") {\n    // String\n    value = buildValue(\n      ast.key,\n      `\"${ast.value}\"`,\n      styles.string,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"undefined\") {\n    // Undefined\n    value = buildValue(\n      ast.key,\n      \"undefined\",\n      styles.undefined,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"symbol\") {\n    // Symbol\n    value = buildValue(\n      ast.key,\n      ast.value.toString(),\n      styles.string,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"function\") {\n    // Function\n    value = buildValue(\n      ast.key,\n      `${ast.value.name}()`,\n      styles.key,\n      showKey,\n      ast.depth\n    );\n  } else if (typeof ast.value === \"object\") {\n    if (ast.value === null) {\n      // Null\n      value = buildValue(ast.key, \"null\", styles.null, showKey, ast.depth);\n    } else if (Array.isArray(ast.value)) {\n      // Array\n      value = buildValue(\n        ast.key,\n        `Array(${ast.value.length})`,\n        styles.key,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof Date) {\n      // Date\n      value = buildValue(\n        ast.key,\n        `Date ${ast.value.toString()}`,\n        styles.value,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof RegExp) {\n      // RegExp\n      value = buildValue(\n        ast.key,\n        ast.value.toString(),\n        styles.regex,\n        showKey,\n        ast.depth\n      );\n    } else if (ast.value instanceof Error) {\n      // Error\n      value = buildValue(\n        ast.key,\n        ast.value.toString(),\n        styles.error,\n        showKey,\n        ast.depth\n      );\n    } else if (isObject(ast.value)) {\n      // Object\n      value = buildValue(ast.key, \"{â€¦}\", styles.key, showKey, ast.depth);\n    } else {\n      // WeakMap, WeakSet, Custom Classes, etc\n      value = buildValue(\n        ast.key,\n        ast.value.constructor.name,\n        styles.key,\n        showKey,\n        ast.depth\n      );\n    }\n  }\n\n  return (\n    <span className={makeClass(themeClass, className)} {...html}>\n      {asyncValue}\n      {value}\n    </span>\n  );\n};\n\nObjectValue.defaultProps = {\n  showKey: true,\n};\n\nexport default ObjectValue;\n"],"mappings":"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"}
